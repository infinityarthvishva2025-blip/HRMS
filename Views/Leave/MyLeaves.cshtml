@model IEnumerable<HRMS.Models.Leave>

@{
    ViewData["Title"] = "My Leave Requests";
}

<div class="container mt-4">

    <h3 class="mb-3">My Leave Requests</h3>
    <a href="/Leave/Create" class="btn btn-primary mb-3">+ Apply New Leave</a>

    <table class="table table-bordered table-striped align-middle">
        <thead class="table-light">
            <tr>
                <th>Category</th>
                <th>From</th>
                <th>To</th>
                <th>Total Days</th>
                <th>Reason</th>
                <th>Manager</th>
                <th>HR</th>
                <th>Director</th>
                <th>Overall</th>
            </tr>
        </thead>

        <tbody>
            @foreach (var item in Model)
            {
                string BadgeClass(string status) =>
                status switch
                {
                    "Approved" => "badge bg-success",
                    "Rejected" => "badge bg-danger",
                    _ => "badge bg-warning text-dark"
                };

                <tr>
                    <td>@item.Category</td>

                    <td>@item.StartDate.ToString("yyyy-MM-dd")</td>

                    <td>
                        @if (item.EndDate.HasValue)
                        {
                            @item.EndDate.Value.ToString("yyyy-MM-dd")
                        }
                        else
                        {
                            <span>-</span>
                        }
                    </td>

                    <td>@item.TotalDays</td>

                    <td>@item.Reason</td>

                    <td><span class="@BadgeClass(item.ManagerStatus)">@item.ManagerStatus</span></td>

                    <td><span class="@BadgeClass(item.HrStatus)">@item.HrStatus</span></td>

                    <td><span class="@BadgeClass(item.DirectorStatus)">@item.DirectorStatus</span></td>

                    <td><span class="@BadgeClass(item.OverallStatus)">@item.OverallStatus</span></td>
                </tr>
            }
        </tbody>

    </table>

</div>
