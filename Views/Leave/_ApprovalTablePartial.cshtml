@model IEnumerable<HRMS.Models.Leave>

<table class="table table-bordered table-hover">
    <thead class="table-light">
        <tr>
            <th>Employee</th>
            <th>Category</th>
            <th>Start</th>
            <th>End</th>
            <th>Days</th>
            <th>Reason</th>
            <th>Status</th>
            <th>Remark</th>
            <th>Actions</th>
        </tr>
    </thead>

    <tbody>
        @foreach (var l in Model)
        {
            <tr>
                <td>@l.Employee?.Name</td>
                <td>@l.Category</td>
                <td>@l.StartDate.ToShortDateString()</td>
                <td>@l.EndDate?.ToShortDateString()</td>
                <td>@l.TotalDays</td>
                <td>@l.Reason</td>

                <td>
                    M: @l.ManagerStatus <br />
                    HR: @l.HrStatus <br />
                    VP: @l.VpStatus <br />
                    Dir: @l.DirectorStatus
                </td>

                <td>
                    <input class="form-control" id="remark-@l.Id" />
                </td>

                <td>
                    <a href="/Leave/@ViewBag.ApproveAction?id=@l.Id&approve=true&remark="
                       class="btn btn-success btn-sm">Approve</a>

                    <a href="/Leave/@ViewBag.ApproveAction?id=@l.Id&approve=false&remark="
                       class="btn btn-danger btn-sm">Reject</a>
                </td>
            </tr>
        }
    </tbody>
</table>


@* 
@model IEnumerable<Leave>

@foreach (var item in Model)
{
    <tr>
        <td>@item.Employee?.Name</td>
        <td>@item.Category</td>
        <td>@item.StartDate.ToShortDateString()</td>
        <td>@item.EndDate?.ToShortDateString()</td>
        <td>@item.TotalDays</td>
        <td>@item.Reason</td>
        <td>
            M: <span class="badge @(item.ManagerStatus == "Approved" ? "bg-success" : item.ManagerStatus == "Rejected" ? "bg-danger" : "bg-warning text-dark")">
                @item.ManagerStatus
            </span><br />
            HR: <span class="badge @(item.HrStatus == "Approved" ? "bg-success" : item.HrStatus == "Rejected" ? "bg-danger" :   "bg-warning text-dark")">
                @item.HrStatus
            </span><br />
            Dir: <span class="badge @(item.DirectorStatus == "Approved" ? "bg-success" : item.DirectorStatus == "Rejected" ? "bg-danger" : "bg-warning text-dark")">
                @item.DirectorStatus
            </span>
        </td>
        <td>
            <form asp-controller="Leave" asp-action="@ViewData["ApproveAction"]" method="post" class="d-flex flex-column gap-1">
                <input type="hidden" name="id" value="@item.Id" />
                <textarea name="remark" class="form-control form-control-sm" rows="2"
                      placeholder="Remark (optional)"></textarea>

                <div class="d-flex gap-1 mt-1">
                    <button type="submit" name="approve" value="true"
                            class="btn btn-success btn-sm w-50">
                        Approve
                    </button>
                    <button type="submit" name="approve" value="false"
                            class="btn btn-danger btn-sm w-50">
                        Reject
                    </button>
                </div>
            </form>
        </td>
    </tr>
}
 *@