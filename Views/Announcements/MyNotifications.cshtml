@model IEnumerable<HRMS.Models.Announcement>
@{
    Layout = "_EmployeeLayout";

    int empId = ViewBag.EmployeeId;   // Controller will pass this

    Func<HRMS.Models.Announcement, bool> isRead = (a) =>
    {
        if (string.IsNullOrEmpty(a.ReadByEmployees))
            return false;

        return a.ReadByEmployees.Split(',').Contains(empId.ToString());
    };
}

<style>
    .notif-card {
        background: #ffffff;
        border-radius: 12px;
        padding: 18px;
        margin-bottom: 15px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        border-left: 6px solid #3949ab;
        transition: 0.2s ease;
    }

        .notif-card.unread {
            border-left-color: #ff9800;
            background: #fff7e6;
        }

    .notif-title {
        font-size: 18px;
        font-weight: 700;
        color: #1a237e;
        margin-bottom: 6px;
    }

    .notif-message {
        font-size: 15px;
        color: #444;
        margin-bottom: 8px;
    }

    .notif-date {
        font-size: 13px;
        color: #888;
    }

    .mark-read-btn {
        background: #1a73e8;
        color: white;
        border: none;
        padding: 6px 14px;
        border-radius: 8px;
        font-size: 13px;
        float: right;
        text-decoration: none;
    }
</style>

<div class="container mt-4">

    <h3 class="mb-4" style="font-weight:700;color:#1a237e;">
        🔔 My Notifications
    </h3>

    @if (!Model.Any())
    {
        <div class="alert alert-info">
            No notifications found.
        </div>
    }
    else
    {
        foreach (var a in Model)
        {
            bool alreadyRead = isRead(a);

            <div class="notif-card @(alreadyRead ? "" : "unread")">

                <div class="notif-title">@a.Title</div>

                <div class="notif-message">@a.Message</div>

                <div class="notif-date">
                     📅 @a.CreatedOn.AddHours(5).AddMinutes(30).ToString("dd MMM yyyy, hh:mm tt")

                </div>

                @if (!alreadyRead)
                {
                    <a href="/Announcements/Read/@a.Id" class="mark-read-btn">
                        Mark as Read
                    </a>
                }

            </div>
        }
    }

</div>
