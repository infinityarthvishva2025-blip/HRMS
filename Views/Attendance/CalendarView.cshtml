@{
    ViewData["Title"] = "Attendance Calendar";
    Layout = "~/Views/Shared/_HrLayout.cshtml";
}

<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.js"></script>

<d<div class="container py-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold text-primary">
            <i class="fa-solid fa-calendar-days me-2"></i> Attendance Calendar
        </h2>
        <a asp-action="Index" class="btn btn-outline-primary">
            <i class="fa-solid fa-arrow-left me-1"></i> Back to List
        </a>
    </div>

    <!-- Calendar container -->
    <div id="calendar" class="shadow-sm border rounded p-3 bg-white"></div>

    <!-- ✅ Paste this block just below the calendar -->
    <div class="mt-3 small">
        <b>Legend:</b>
        <span class="badge bg-success">Present</span>
        <span class="badge bg-warning text-dark">Not Checked Out</span>
        <span class="badge bg-danger">Absent</span>
    </div>
</div>


@section Scripts {
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                var calendarEl = document.getElementById('calendar');

                // ✅ Safely parse your JSON data
                var attendanceData = @Html.Raw(ViewBag.AttendanceJson ?? "[]");

                // ✅ Initialize the calendar
                var calendar = new FullCalendar.Calendar(calendarEl, {
                    initialView: 'dayGridMonth',
                    height: 'auto',
                    themeSystem: 'bootstrap5',
                    events: attendanceData,
                    eventDisplay: 'block',
                    eventTextColor: '#fff',
                    headerToolbar: {
                        left: 'prev,next today',
                        center: 'title',
                        right: 'dayGridMonth,dayGridWeek,dayGridDay'
                    }
                });

                calendar.render();
            });
        </script>
}

<style>
    #calendar {
        max-width: 100%;
        font-family: 'Poppins', sans-serif;
    }

    .fc .fc-toolbar-title {
        font-weight: 600;
        color: #2F3D88;
    }

    .fc-daygrid-event {
        border-radius: 6px;
        font-size: 0.85rem;
        padding: 2px 4px;
    }

    .fc-day-today {
        background-color: #fff9e6 !important;
    }
</style>
