@model IEnumerable<HRMS.Models.GurukulVideo>

@{
    ViewData["Title"] = "Gurukul Videos";
    Layout = "_EmployeeLayout";

    // Get grouped data from Controller
    var groupedData = ViewBag.GroupedData as Dictionary<string, Dictionary<string, List<HRMS.Models.GurukulVideo>>>;
}

<style>
    .square-card {
        aspect-ratio: 1 / 1;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 1px solid #ddd;
        border-radius: 10px;
        padding: 10px;
        transition: 0.3s;
        cursor: pointer;
        background: #fff;
        text-align: center;
        font-weight: bold;
    }

        .square-card:hover {
            background: #f2f2f2;
            transform: scale(1.03);
        }

    .titlegroup-header {
        background: #007bff;
        color: white;
        padding: 10px;
        border-radius: 5px;
        font-size: 20px;
        cursor: pointer;
    }

    .category-header {
        background: #e7f1ff;
        padding: 8px;
        border-left: 4px solid #007bff;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 4px;
    }
</style>

<div class="container mt-3">

    @foreach (var tg in groupedData)
    {
        var tgId = "tg_" + Guid.NewGuid();   // unique id

        <!-- TITLE GROUP -->
        <div class="titlegroup-header mb-2"
             data-bs-toggle="collapse"
             data-bs-target="#@tgId">
            @tg.Key
        </div>

        <div id="@tgId" class="collapse">
            <div class="card card-body">

                @foreach (var cat in tg.Value)
                {
                    var catId = "cat_" + Guid.NewGuid();   // unique id

                    <!-- CATEGORY -->
                    <h5 class="category-header"
                        data-bs-toggle="collapse"
                        data-bs-target="#@catId">
                        @cat.Key
                    </h5>

                    <div id="@catId" class="collapse ms-3"
                         data-bs-parent="#@tgId">

                        <div class="row mt-2">

                            @foreach (var video in cat.Value)
                            {
                                <div class="col-md-3 mb-3">
                                    <div class="square-card"
                                         onclick="location.href='@Url.Action("Details", "Gurukul", new { id = video.Id })'">
                                        @video.Title
                                    </div>
                                </div>
                            }

                        </div>
                    </div>
                }

            </div>
        </div>
    }

</div>
