@model HRMS.Models.Employee
@{
    ViewData["Title"] = "My Profile";
    Layout = "~/Views/Shared/_EmployeeLayout.cshtml";
    string baseFolder = Url.Content("~/uploads/employees/" + Model.EmployeeCode + "/");
}

<div class="container py-4">

    <!-- HEADER -->
    <div class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-2">
        <h3 class="fw-bold text-primary">
            <i class="fa-solid fa-id-card me-2"></i> My Profile
        </h3>
       
    </div>

    <!-- BASIC INFO CARD -->
    <div class="card shadow-sm border-0 mb-4">
        <div class="row g-4 p-4 align-items-center">
            <div class="col-md-3 text-center">
                @if (!string.IsNullOrEmpty(Model.ProfileImagePath))
                {
                    var profileUrl = baseFolder + Model.ProfileImagePath;
                    <img src="@profileUrl" class="rounded-circle shadow" style="width:150px;height:150px;object-fit:cover;" alt="Profile Photo" />
                }
                else
                {
                    <div class="border rounded-circle d-flex align-items-center justify-content-center mx-auto" style="width:150px;height:150px;background:#f0f0f0;">
                        <i class="fa-solid fa-user fa-3x text-muted"></i>
                    </div>
                }
                <h5 class="mt-3 fw-bold">@Model.Name</h5>
                <p class="text-muted mb-0">@Model.EmployeeCode</p>
                <span class="badge bg-primary mt-1">@Model.Role</span>
            </div>

            <div class="col-md-9 border-start ps-4">
                <h5 class="fw-semibold text-secondary mb-3"><i class="fa-solid fa-circle-info me-2 text-primary"></i>Basic Details</h5>
                <div class="row g-3">
                    <div class="col-md-4"><strong>Email:</strong><br />@Model.Email</div>
                    <div class="col-md-4"><strong>Mobile:</strong><br />@Model.MobileNumber</div>
                    <div class="col-md-4"><strong>Alternate Mobile:</strong><br />@(string.IsNullOrEmpty(Model.AlternateMobileNumber) ? "-" : Model.AlternateMobileNumber)</div>
                    <div class="col-md-4"><strong>Gender:</strong><br />@Model.Gender</div>
                    <div class="col-md-4"><strong>DOB:</strong><br />@(Model.DOB_Date?.ToString("dd-MMM-yyyy") ?? "-")</div>
                    <div class="col-md-4"><strong>Marital Status:</strong><br />@Model.MaritalStatus</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ADDRESS CARD -->
    <div class="card shadow-sm border-0 mb-4 p-4">
        <h5 class="fw-semibold text-secondary mb-3"><i class="fa-solid fa-location-dot me-2 text-primary"></i>Address Details</h5>
        <div class="row">
            <div class="col-md-6">
                <strong>Current Address:</strong>
                <p class="mb-0">@(!string.IsNullOrEmpty(Model.Address) ? Model.Address : "-")</p>
            </div>
            <div class="col-md-6">
                <strong>Permanent Address:</strong>
                <p class="mb-0">@(!string.IsNullOrEmpty(Model.PermanentAddress) ? Model.PermanentAddress : "-")</p>
            </div>
        </div>
    </div>

    <!-- JOB DETAILS -->
    <div class="card shadow-sm border-0 mb-4 p-4">
        <h5 class="fw-semibold text-secondary mb-3"><i class="fa-solid fa-briefcase me-2 text-primary"></i>Job Details</h5>
        <div class="row g-3">
            <div class="col-md-4"><strong>Joining Date:</strong><br />@(Model.JoiningDate?.ToString("dd-MMM-yyyy") ?? "-")</div>
            <div class="col-md-4"><strong>Department:</strong><br />@Model.Department</div>
            <div class="col-md-4"><strong>Position:</strong><br />@Model.Position</div>
            <div class="col-md-4"><strong>Reporting Manager:</strong><br />@Model.ReportingManager</div>
            <div class="col-md-4"><strong>Salary:</strong><br />₹@Model.Salary?.ToString("N2")</div>
            <div class="col-md-4"><strong>Experience:</strong><br />@(Model.TotalExperienceYears > 0 ? $"{Model.TotalExperienceYears} Years" : "Fresher")</div>
        </div>
    </div>

    <!-- EDUCATION -->
    <div class="card shadow-sm border-0 mb-4 p-4">
        <h5 class="fw-semibold text-secondary mb-3"><i class="fa-solid fa-graduation-cap me-2 text-primary"></i>Education</h5>
        <div class="row g-3">
            <div class="col-md-4"><strong>12th %:</strong> @Model.HSCPercent</div>
            <div class="col-md-4"><strong>Graduation:</strong> @Model.GraduationCourse (@Model.GraduationPercent%)</div>
            <div class="col-md-4"><strong>Post Graduation:</strong> @(string.IsNullOrEmpty(Model.PostGraduationCourse) ? "-" : $"{Model.PostGraduationCourse} ({Model.PostGraduationPercent}%)")</div>
        </div>
    </div>

    <!-- BANK DETAILS -->
    <div class="card shadow-sm border-0 mb-4 p-4">
        <h5 class="fw-semibold text-secondary mb-3"><i class="fa-solid fa-building-columns me-2 text-primary"></i>Bank Details</h5>
        <div class="row g-3">
            <div class="col-md-4"><strong>Account Holder Name:</strong><br />@Model.AccountHolderName</div>
            <div class="col-md-4"><strong>Bank Name:</strong><br />@Model.BankName</div>
            <div class="col-md-4"><strong>Account Number:</strong><br />@Model.AccountNumber</div>
            <div class="col-md-4"><strong>IFSC Code:</strong><br />@Model.IFSC</div>
            <div class="col-md-4"><strong>Branch:</strong><br />@Model.Branch</div>
        </div>
    </div>

    <!-- EMERGENCY DETAILS -->
    <div class="card shadow-sm border-0 mb-4 p-4">
        <h5 class="fw-semibold text-secondary mb-3"><i class="fa-solid fa-phone me-2 text-danger"></i>Emergency Contact</h5>
        <div class="row g-3">
            <div class="col-md-4"><strong>Name:</strong><br />@Model.EmergencyContactName</div>
            <div class="col-md-4"><strong>Relationship:</strong><br />@Model.EmergencyContactRelationship</div>
            <div class="col-md-4"><strong>Mobile:</strong><br />@Model.EmergencyContactMobile</div>
            <div class="col-md-12"><strong>Address:</strong><br />@Model.EmergencyContactAddress</div>
        </div>
    </div>

    <!-- HEALTH INFO -->
    <div class="card shadow-sm border-0 p-4 mb-4">
        <h5 class="fw-semibold text-secondary mb-3"><i class="fa-solid fa-heart-pulse me-2 text-danger"></i>Health Information</h5>
        <div class="row g-3">
            <div class="col-md-4"><strong>Has Disease:</strong><br />@Model.HasDisease</div>
            <div class="col-md-4"><strong>Disease Name:</strong><br />@Model.DiseaseName</div>
            <div class="col-md-4"><strong>Since:</strong><br />@Model.DiseaseSince</div>
            <div class="col-md-4"><strong>Medicines:</strong><br />@Model.MedicinesRequired</div>
            <div class="col-md-4"><strong>Doctor:</strong><br />@Model.DoctorName</div>
            <div class="col-md-4"><strong>Doctor Contact:</strong><br />@Model.DoctorContact</div>
        </div>

        @if (!string.IsNullOrEmpty(Model.MedicalDocumentFilePath))
        {
            var docUrl = baseFolder + Model.MedicalDocumentFilePath;
            <hr />
            <div>
                <h6 class="fw-bold">Medical Document:</h6>
                <a href="@docUrl" target="_blank" class="btn btn-outline-primary btn-sm">
                    <i class="fa-solid fa-file-medical me-1"></i> View / Download
                </a>
            </div>
        }
    </div>

    <!-- FOOTER -->
    <div class="text-center text-muted mt-4">
        <small>© @DateTime.Now.Year Infinity Arthvishva | HRMS Portal</small>
    </div>
</div>

<style>
    body {
        background-color: #f8fafc;
    }

    h5 i {
        color: var(--bs-primary);
    }

    .card {
        border-radius: 10px;
        transition: 0.2s ease;
    }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
        }

    strong {
        color: #0d6efd;
    }
</style>
