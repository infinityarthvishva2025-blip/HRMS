@model HRMS.Models.Employee
@{
    Layout = "~/Views/Shared/_EmployeeLayout.cshtml";
    ViewData["Title"] = "My Profile";
}

@{
    var photoPath = string.IsNullOrEmpty(Model.ProfileImagePath)
        ? "/images/default-user.png"
        : $"/uploads/employees/{Model.EmployeeCode}/{Model.ProfileImagePath}";
}

<div class="container my-5">

    <div class="card shadow-lg border-0 rounded-4">
        <div class="card-header bg-primary text-white text-center">
            <h3>My Profile</h3>
        </div>

        <div class="card-body p-4">

            <div class="text-center mb-4">

                <img src="@photoPath"
                     class="rounded-circle shadow"
                     style="width: 130px; height: 130px; object-fit: cover;" />

                <h4 class="mt-3">@Model.Name</h4>
                <p class="text-muted">@Model.Position | @Model.Department</p>
                <p class="text-muted"><strong>Role:</strong> @Model.Role</p>
            </div>

            <div class="row g-3">

                <!-- BASIC DETAILS -->
                <div class="col-md-6">
                    <label class="form-label">Full Name</label>
                    <input value="@Model.Name" class="form-control" readonly />
                </div>

                <div class="col-md-6">
                    <label class="form-label">Email</label>
                    <input value="@Model.Email" class="form-control" readonly />
                </div>

                <div class="col-md-6">
                    <label class="form-label">Mobile Number</label>
                    <input value="@Model.MobileNumber" class="form-control" readonly />
                </div>

                <div class="col-md-6">
                    <label class="form-label">Gender</label>
                    <input value="@Model.Gender" class="form-control" readonly />
                </div>

                <div class="col-md-6">
                    <label class="form-label">DOB</label>
                    <input value="@Model.DOB_Date?.ToString("yyyy-MM-dd")" class="form-control" readonly />
                </div>

                <div class="col-md-6">
                    <label class="form-label">Marital Status</label>
                    <input value="@Model.MaritalStatus" class="form-control" readonly />
                </div>

                <div class="col-md-6">
                    <label class="form-label">Father Name</label>
                    <input value="@Model.FatherName" class="form-control" readonly />
                </div>

                <div class="col-md-6">
                    <label class="form-label">Mother Name</label>
                    <input value="@Model.MotherName" class="form-control" readonly />
                </div>

                <div class="col-md-12">
                    <label class="form-label">Address</label>
                    <textarea class="form-control" readonly>@Model.Address</textarea>
                </div>

                <!-- JOB DETAILS -->
                <div class="col-md-6">
                    <label class="form-label">Department</label>
                    <input value="@Model.Department" class="form-control" readonly />
                </div>

                <div class="col-md-6">
                    <label class="form-label">Position</label>
                    <input value="@Model.Position" class="form-control" readonly />
                </div>

                <div class="col-md-6">
                    <label class="form-label">Reporting Manager</label>
                    <input value="@Model.ReportingManager" class="form-control" readonly />
                </div>

                <div class="col-md-6">
                    <label class="form-label">Joining Date</label>
                    <input value="@Model.JoiningDate?.ToString("yyyy-MM-dd")" class="form-control" readonly />
                </div>

                <!-- EXPERIENCE DETAILS -->
                <div class="col-md-6">
                    <label class="form-label">Experience Type</label>
                    <input value="@Model.ExperienceType" class="form-control" readonly />
                </div>

                @if (Model.ExperienceType == "Experienced")
                {
                    <div class="col-md-6">
                        <label class="form-label">Total Experience (Years)</label>
                        <input value="@Model.TotalExperienceYears" class="form-control" readonly />
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">Last Company</label>
                        <input value="@Model.LastCompanyName" class="form-control" readonly />
                    </div>
                }

                <!-- ID DETAILS -->
                <div class="col-md-6">
                    <label class="form-label">Aadhaar</label>
                    <input value="@Model.AadhaarNumber" class="form-control" readonly />

                    @if (!string.IsNullOrEmpty(Model.AadhaarFilePath))
                    {
                        <a href="/uploads/employees/@Model.EmployeeCode/@Model.AadhaarFilePath"
                           target="_blank" class="btn btn-sm btn-outline-primary mt-1">View Aadhaar</a>
                    }
                </div>

                <div class="col-md-6">
                    <label class="form-label">PAN</label>
                    <input value="@Model.PanNumber" class="form-control" readonly />

                    @if (!string.IsNullOrEmpty(Model.PanFilePath))
                    {
                        <a href="/uploads/employees/@Model.EmployeeCode/@Model.PanFilePath"
                           target="_blank" class="btn btn-sm btn-outline-primary mt-1">View PAN</a>
                    }
                </div>

                <!-- BANK DETAILS -->
                <div class="col-md-6">
                    <label class="form-label">Bank Name</label>
                    <input value="@Model.BankName" class="form-control" readonly />
                </div>

                <div class="col-md-6">
                    <label class="form-label">Account Number</label>
                    <input value="@Model.AccountNumber" class="form-control" readonly />
                </div>

                <div class="col-md-6">
                    <label class="form-label">IFSC</label>
                    <input value="@Model.IFSC" class="form-control" readonly />
                </div>

                <div class="col-md-6">
                    <label class="form-label">Branch</label>
                    <input value="@Model.Branch" class="form-control" readonly />
                </div>

                <!-- MARKSHEET & PASSBOOK LINKS -->
                <div class="col-md-6">
                    @if (!string.IsNullOrEmpty(Model.PassbookFilePath))
                    {
                        <label class="form-label">Passbook</label>
                    
                        <br />
                        <a href="/uploads/employees/@Model.EmployeeCode/@Model.PassbookFilePath"
                           target="_blank" class="btn btn-sm btn-outline-primary">View Passbook</a>
                    }
                </div>

                <div class="col-md-6">
                    @if (!string.IsNullOrEmpty(Model.MarksheetFilePath))
                    {
                        <label class="form-label">Marksheet</label>
                    
                        <br />
                        <a href="/uploads/employees/@Model.EmployeeCode/@Model.MarksheetFilePath"
                           target="_blank" class="btn btn-sm btn-outline-primary">View Marksheet</a>
                    }
                </div>

            </div>

            <div class="text-center mt-4">
                <a href="/Employees/Dashboard" class="btn btn-secondary px-4">Back</a>
            </div>

        </div>
    </div>
</div>
