@model HRMS.Models.Employee
@{
    ViewData["Title"] = "My Profile";
    Layout = "~/Views/Shared/_EmployeeLayout.cshtml";
    string baseFolder = Url.Content("~/uploads/employees/" + Model.EmployeeCode + "/");
}

<div class="container py-4">

    <!-- HEADER -->
    <div class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-3">
        <h3 class="fw-bold text-primary">
            <i class="fa-solid fa-id-card me-2"></i> My Profile
        </h3>

        <a href="@Url.Action("Edit", "Employees", new { id = Model.Id })"
           class="btn btn-accent btn-sm">
            <i class="fa-solid fa-pen-to-square me-1"></i> Edit Profile
        </a>



    </div>

    <!-- BASIC INFO CARD -->
    <div class="card profile-card mb-4">
        <div class="row g-4 p-4 align-items-center">
            <div class="col-md-3 text-center">
                @if (!string.IsNullOrEmpty(Model.ProfileImagePath))
                {
                    var profileUrl = baseFolder + Model.ProfileImagePath;
                    <img src="@profileUrl" class="profile-photo shadow" alt="Profile Photo" />
                }
                else
                {
                    <div class="profile-placeholder">
                        <i class="fa-solid fa-user fa-3x text-muted"></i>
                    </div>
                }

                <h5 class="mt-3 fw-bold text-secondary">@Model.Name</h5>
                <p class="text-muted mb-0 small">@Model.EmployeeCode</p>
                <span class="badge role-badge">@Model.Role</span>
            </div>

            <div class="col-md-9 border-start ps-4">
                <h5 class="section-title"><i class="fa-solid fa-circle-info me-2"></i>Basic Details</h5>
                <div class="row g-3">
                    <div class="col-md-4"><strong>Email:</strong><br />@Model.Email</div>
                    <div class="col-md-4"><strong>Mobile:</strong><br />@Model.MobileNumber</div>
                    <div class="col-md-4"><strong>Alternate Mobile:</strong><br />@(string.IsNullOrEmpty(Model.AlternateMobileNumber) ? "-" : Model.AlternateMobileNumber)</div>
                    <div class="col-md-4"><strong>Gender:</strong><br />@Model.Gender</div>
                    <div class="col-md-4"><strong>DOB:</strong><br />@(Model.DOB_Date?.ToString("dd-MMM-yyyy") ?? "-")</div>
                    <div class="col-md-4"><strong>Marital Status:</strong><br />@Model.MaritalStatus</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ADDRESS -->
    <div class="card profile-card mb-4">
        <h5 class="section-title"><i class="fa-solid fa-location-dot me-2"></i>Address Details</h5>
        <div class="row px-4 pb-3">
            <div class="col-md-6">
                <strong>Current Address:</strong>
                <p>@(!string.IsNullOrEmpty(Model.Address) ? Model.Address : "-")</p>
            </div>
            <div class="col-md-6">
                <strong>Permanent Address:</strong>
                <p>@(!string.IsNullOrEmpty(Model.PermanentAddress) ? Model.PermanentAddress : "-")</p>
            </div>
        </div>
    </div>

    <!-- JOB DETAILS -->
    <div class="card profile-card mb-4">
        <h5 class="section-title"><i class="fa-solid fa-briefcase me-2"></i>Job Details</h5>
        <div class="row g-3 px-4 pb-3">
            <div class="col-md-4"><strong>Joining Date:</strong><br />@(Model.JoiningDate?.ToString("dd-MMM-yyyy") ?? "-")</div>
            <div class="col-md-4"><strong>Department:</strong><br />@Model.Department</div>
            <div class="col-md-4"><strong>Position:</strong><br />@Model.Position</div>
            <div class="col-md-4"><strong>Reporting Manager:</strong><br />@Model.ReportingManager</div>
            <div class="col-md-4"><strong>Salary:</strong><br />₹@Model.Salary?.ToString("N2")</div>
            <div class="col-md-4"><strong>Experience:</strong><br />@(Model.TotalExperienceYears > 0 ? $"{Model.TotalExperienceYears} Years" : "Fresher")</div>
        </div>
    </div>

    <!-- EDUCATION -->
    <div class="card profile-card mb-4">
        <h5 class="section-title"><i class="fa-solid fa-graduation-cap me-2"></i>Education</h5>
        <div class="row g-3 px-4 pb-3">
            <div class="col-md-4"><strong>12th %:</strong> @Model.HSCPercent</div>
            <div class="col-md-4"><strong>Graduation:</strong> @Model.GraduationCourse (@Model.GraduationPercent%)</div>
            <div class="col-md-4"><strong>Post Graduation:</strong> @(string.IsNullOrEmpty(Model.PostGraduationCourse) ? "-" : $"{Model.PostGraduationCourse} ({Model.PostGraduationPercent}%)")</div>
        </div>
    </div>

    <!-- BANK DETAILS -->
    <div class="card profile-card mb-4">
        <h5 class="section-title"><i class="fa-solid fa-building-columns me-2"></i>Bank Details</h5>
        <div class="row g-3 px-4 pb-3">
            <div class="col-md-4"><strong>Account Holder Name:</strong><br />@Model.AccountHolderName</div>
            <div class="col-md-4"><strong>Bank Name:</strong><br />@Model.BankName</div>
            <div class="col-md-4"><strong>Account Number:</strong><br />@Model.AccountNumber</div>
            <div class="col-md-4"><strong>IFSC Code:</strong><br />@Model.IFSC</div>
            <div class="col-md-4"><strong>Branch:</strong><br />@Model.Branch</div>
        </div>
    </div>

    <!-- EMERGENCY -->
    <div class="card profile-card mb-4">
        <h5 class="section-title text-danger"><i class="fa-solid fa-phone me-2"></i>Emergency Contact</h5>
        <div class="row g-3 px-4 pb-3">
            <div class="col-md-4"><strong>Name:</strong><br />@Model.EmergencyContactName</div>
            <div class="col-md-4"><strong>Relationship:</strong><br />@Model.EmergencyContactRelationship</div>
            <div class="col-md-4"><strong>Mobile:</strong><br />@Model.EmergencyContactMobile</div>
            <div class="col-md-12"><strong>Address:</strong><br />@Model.EmergencyContactAddress</div>
        </div>
    </div>

    <!-- HEALTH INFO -->
    <div class="card profile-card mb-4">
        <h5 class="section-title text-danger"><i class="fa-solid fa-heart-pulse me-2"></i>Health Information</h5>
        <div class="row g-3 px-4 pb-3">
            <div class="col-md-4"><strong>Has Disease:</strong><br />@Model.HasDisease</div>
            <div class="col-md-4"><strong>Disease Name:</strong><br />@Model.DiseaseName</div>
            <div class="col-md-4"><strong>Since:</strong><br />@Model.DiseaseSince</div>
            <div class="col-md-4"><strong>Medicines:</strong><br />@Model.MedicinesRequired</div>
            <div class="col-md-4"><strong>Doctor:</strong><br />@Model.DoctorName</div>
            <div class="col-md-4"><strong>Doctor Contact:</strong><br />@Model.DoctorContact</div>
        </div>

        @if (!string.IsNullOrEmpty(Model.MedicalDocumentFilePath))
        {
            var docUrl = baseFolder + Model.MedicalDocumentFilePath;
            <div class="border-top mt-3 pt-3 px-4">
                <a href="@docUrl" target="_blank" class="btn btn-accent btn-sm">
                    <i class="fa-solid fa-file-medical me-1"></i> View Medical Document
                </a>
            </div>
        }
    </div>

    <!-- FOOTER -->
    <div class="text-center text-muted mt-4">
        <small>© @DateTime.Now.Year Infinity Arthvishva | HRMS Portal</small>
    </div>
</div>

<style>
    :root {
        --primary: #2F3D88;
        --secondary: #0E8376;
        --accent: #F9A826;
    }

    body {
        background-color: #f9fafc;
        font-family: 'Poppins', 'Open Sans', sans-serif;
    }

    .text-primary {
        color: var(--primary) !important;
    }

    .text-secondary {
        color: var(--secondary) !important;
    }

    .profile-card {
        border: none;
        border-radius: 16px;
        box-shadow: 0 3px 12px rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease;
        background: #fff;
    }

        .profile-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
        }

    .profile-photo {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        object-fit: cover;
        border: 4px solid var(--secondary);
    }

    .profile-placeholder {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        background: #f0f3f5;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px dashed #d0d0d0;
        margin: 0 auto;
    }

    .role-badge {
        background-color: var(--accent);
        color: #fff;
        border-radius: 12px;
        font-size: 0.8rem;
        padding: 0.4rem 0.8rem;
    }

    .section-title {
        color: var(--secondary);
        font-weight: 600;
        border-bottom: 2px solid #e9ecef;
        padding-bottom: 8px;
        margin: 0 0 1rem 0;
    }

    strong {
        color: var(--primary);
        font-weight: 600;
    }

    .btn-accent {
        background-color: var(--accent);
        border: none;
        color: #fff;
        transition: 0.3s;
    }

        .btn-accent:hover {
            background-color: #e69500;
            color: #fff;
        }
</style>
