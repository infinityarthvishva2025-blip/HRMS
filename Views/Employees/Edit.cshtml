@model HRMS.Models.Employee

@{
    ViewData["Title"] = "Edit Employee";
    Layout = "~/Views/Shared/_HrLayout.cshtml";
}

<div class="container py-4">

    <h3 class="fw-bold text-primary mb-4">
        <i class="fa-solid fa-user-pen me-2"></i> Edit Employee
    </h3>

    <form asp-action="Edit" method="post" enctype="multipart/form-data">

        @Html.AntiForgeryToken()
        <input type="hidden" asp-for="Id" />

        <div asp-validation-summary="All" class="text-danger mb-3"></div>

        <div class="card p-4 shadow-sm">

            <!-- BASIC DETAILS -->
            <h5 class="fw-bold text-secondary mb-3">Basic Details</h5>

            <div class="row g-3">

                <div class="col-md-4">
                    <label asp-for="EmployeeCode"></label>
                    <input asp-for="EmployeeCode" class="form-control" readonly />
                </div>

                <div class="col-md-4">
                    <label asp-for="Name"></label>
                    <input asp-for="Name" class="form-control" required />
                </div>

                <div class="col-md-4">
                    <label asp-for="Email"></label>
                    <input asp-for="Email" class="form-control" required />
                </div>

                <div class="col-md-4">
                    <label asp-for="MobileNumber"></label>
                    <input asp-for="MobileNumber" class="form-control" required />
                </div>

            </div>

            <hr />

            <!-- JOB DETAILS -->
            <h5 class="fw-bold text-secondary mb-3">Job Details</h5>

            <div class="row g-3">

                <div class="col-md-4">
                    <label asp-for="Department"></label>
                    <input asp-for="Department" class="form-control" readonly />
                </div>

                <div class="col-md-4">
                    <label asp-for="Position"></label>
                    <input asp-for="Position" class="form-control" readonly />
                </div>

                <div class="col-md-4">
                    <label asp-for="Role"></label>
                    <select asp-for="Role" class="form-select" required>
                        <option value="">-- Select Role --</option>
                        <option>Employee</option>
                        <option>Manager</option>
                        <option>Vice President</option>
                        <option>Director</option>
                    </select>
                </div>

                <div class="col-md-4">
                    <label asp-for="Salary"></label>
                    <input asp-for="Salary" class="form-control" required />
                </div>

                <div class="col-md-8">
                    <label asp-for="ReportingManager"></label>
                    <input asp-for="ReportingManager" class="form-control" required />
                </div>

                <div class="col-md-12">
                    <label asp-for="Address"></label>
                    <textarea asp-for="Address" class="form-control" rows="2" required></textarea>
                </div>

            </div>

            <hr />

            <!-- EDUCATION -->
            <h5 class="fw-bold text-secondary mb-3">Education</h5>

            <div class="row g-3">

                <div class="col-md-4">
                    <label asp-for="HSCPercent"></label>
                    <input asp-for="HSCPercent" class="form-control" />
                </div>

                <div class="col-md-4">
                    <label asp-for="GraduationCourse"></label>
                    <input asp-for="GraduationCourse" class="form-control" />
                </div>

                <div class="col-md-4">
                    <label asp-for="GraduationPercent"></label>
                    <input asp-for="GraduationPercent" class="form-control" />
                </div>

                <div class="col-md-4">
                    <label asp-for="PostGraduationCourse"></label>
                    <input asp-for="PostGraduationCourse" class="form-control" />
                </div>

                <div class="col-md-4">
                    <label asp-for="PostGraduationPercent"></label>
                    <input asp-for="PostGraduationPercent" class="form-control" />
                </div>

            </div>

            <hr />

            <!-- IDENTITY DETAILS -->
            <h5 class="fw-bold text-secondary mb-3">Identity Details</h5>

            <div class="row g-3">

                <div class="col-md-4">
                    <label asp-for="AadhaarNumber"></label>
                    <input asp-for="AadhaarNumber" class="form-control" />
                </div>

                <div class="col-md-4">
                    <label asp-for="PanNumber"></label>
                    <input asp-for="PanNumber" class="form-control" />
                </div>

            </div>

            <hr />

            <!-- BANK DETAILS (NEW) -->
            <h5 class="fw-bold text-secondary mb-3">Bank Details</h5>

            <div class="row g-3">

                <div class="col-md-6">
                    <label asp-for="BankName"></label>
                    <input asp-for="BankName" class="form-control" />
                </div>
                <div class="col-md-6">
                    <label asp-for="Branch"></label>
                    <input asp-for="Branch" class="form-control" />
                </div>

                <div class="col-md-6">
                    <label asp-for="AccountHolderName"></label>
                    <input asp-for="AccountHolderName" class="form-control" />
                </div>

                <div class="col-md-6">
                    <label asp-for="AccountNumber"></label>
                    <input asp-for="AccountNumber" class="form-control"
                           pattern="[0-9]{9,18}"
                           title="Account number must be 9–18 digits" />
                </div>

                <div class="col-md-6">
                    <label asp-for="IFSC"></label>
                    <input asp-for="IFSC" class="form-control"
                           pattern="[A-Z]{4}0[A-Z0-9]{6}"
                           title="Enter valid IFSC e.g. HDFC0001234"  />
                </div>

            </div>

            <hr />

            <!-- DOCUMENTS UPDATE -->
            <h5 class="fw-bold text-secondary mb-3">Update Documents</h5>

            <div class="row g-4">

                <!-- Profile Photo -->
                <div class="col-md-6">
                    <label class="form-label">Profile Photo</label>

                    @if (!string.IsNullOrEmpty(Model.ProfileImagePath))
                    {
                        <div class="mb-2">
                            <a target="_blank" href="/uploads/employees/@Model.EmployeeCode/@Model.ProfileImagePath">View Current</a>
                        </div>
                    }

                    <input type="file" name="ProfilePhoto" class="form-control" accept="image/*" />
                </div>

                <!-- Aadhaar -->
                <div class="col-md-6">
                    <label class="form-label">Aadhaar</label>

                    @if (!string.IsNullOrEmpty(Model.AadhaarFilePath))
                    {
                        <div class="mb-2">
                            <a target="_blank" href="/uploads/employees/@Model.EmployeeCode/@Model.AadhaarFilePath">View Current</a>
                        </div>
                    }

                    <input type="file" name="AadhaarFile" class="form-control" accept="image/*,.pdf" />
                </div>

                <!-- PAN -->
                <div class="col-md-6">
                    <label class="form-label">PAN Card</label>

                    @if (!string.IsNullOrEmpty(Model.PanFilePath))
                    {
                        <div class="mb-2">
                            <a target="_blank" href="/uploads/employees/@Model.EmployeeCode/@Model.PanFilePath">View Current</a>
                        </div>
                    }

                    <input type="file" name="PanFile" class="form-control" accept="image/*,.pdf" />
                </div>

                <!-- Passbook -->
                <div class="col-md-6">
                    <label class="form-label">Bank Passbook</label>

                    @if (!string.IsNullOrEmpty(Model.PassbookFilePath))
                    {
                        <div class="mb-2">
                            <a target="_blank" href="/uploads/employees/@Model.EmployeeCode/@Model.PassbookFilePath">View Current</a>
                        </div>
                    }

                    <input type="file" name="PassbookFile" class="form-control" accept="image/*,.pdf" />
                </div>

                <!-- Marksheet -->
                <div class="col-md-6">
                    <label class="form-label">Marksheet</label>

                    @if (!string.IsNullOrEmpty(Model.MarksheetFilePath))
                    {
                        <div class="mb-2">
                            <a target="_blank" href="/uploads/employees/@Model.EmployeeCode/@Model.MarksheetFilePath">View Current</a>
                        </div>
                    }

                    <input type="file" name="MarksheetFile" class="form-control" accept="image/*,.pdf" />
                </div>

            </div>

            <div class="text-end mt-4">
                <button class="btn btn-success px-4">
                    <i class="fa-solid fa-check me-1"></i> Update Employee
                </button>
            </div>

        </div>
    </form>

</div>
