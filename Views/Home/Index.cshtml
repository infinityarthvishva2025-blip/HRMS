@{
    ViewData["Title"] = "Dashboard";
}

<!-- Dashboard Summary Cards -->
<div class="row">
    <div class="col-md-3 mb-3">
        <div class="card shadow-sm border-0 text-center">
            <div class="card-body">
                <i class="fa-solid fa-users fa-2x text-primary mb-2"></i>
                <h4 class="fw-bold mb-0">47</h4>
                <small>Total Employees</small>
            </div>
        </div>
    </div>

    <div class="col-md-3 mb-3">
        <div class="card shadow-sm border-0 text-center">
            <div class="card-body">
                <i class="fa-solid fa-user-check fa-2x text-success mb-2"></i>
                <h4 class="fw-bold mb-0">42</h4>
                <small>Today's Present</small>
            </div>
        </div>
    </div>

    <div class="col-md-3 mb-3">
        <div class="card shadow-sm border-0 text-center">
            <div class="card-body">
                <i class="fa-solid fa-location-dot fa-2x text-info mb-2"></i>
                <h4 class="fw-bold mb-0">35</h4>
                <small>Geo Tags Assigned</small>
            </div>
        </div>
    </div>

    <div class="col-md-3 mb-3">
        <div class="card shadow-sm border-0 text-center">
            <div class="card-body">
                <i class="fa-solid fa-calendar-xmark fa-2x text-warning mb-2"></i>
                <h4 class="fw-bold mb-0">8</h4>
                <small>Pending Leaves</small>
            </div>
        </div>
    </div>
</div>

<!-- Celebrations + Chart Row -->
<div class="row mt-4">
    <!-- Celebrations Section -->
    <div class="col-md-6 mb-4">
        <div class="card shadow-sm border-0 h-100">
            <div class="card-header bg-white fw-bold">
                🎉 Celebrations
            </div>
            <div class="card-body">

                <!-- Today's Celebrations -->
                <h5>Today's Celebrations</h5>
                @if ((Model?.TodaysBirthdays?.Any() ?? false) || (Model?.TodaysAnniversaries?.Any() ?? false))
                {
                    @foreach (var emp in Model.TodaysBirthdays ?? new List<HRMS.Models.Employee>())
                    {
                        <div><i class="fa fa-birthday-cake text-danger"></i> @emp.Name - Birthday Today 🎂</div>
                    }

                    @foreach (var emp in Model.TodaysAnniversaries ?? new List<HRMS.Models.Employee>())
                    {
                        <div><i class="fa fa-briefcase text-info"></i> @emp.Name - Work Anniversary 🎉</div>
                    }
                }
                else
                {
                    <div class="text-muted">No celebrations today 🎈</div>
                }

                <hr />

                <!-- Tomorrow's Celebrations -->
                <h5>Tomorrow's Celebrations</h5>
                @if ((Model?.TomorrowsBirthdays?.Any() ?? false) || (Model?.TomorrowsAnniversaries?.Any() ?? false))
                {
                    @foreach (var emp in Model.TomorrowsBirthdays ?? new List<HRMS.Models.Employee>())
                    {
                        <div><i class="fa fa-birthday-cake text-danger"></i> @emp.Name - Birthday Tomorrow 🎈</div>
                    }

                    @foreach (var emp in Model.TomorrowsAnniversaries ?? new List<HRMS.Models.Employee>())
                    {
                        <div><i class="fa fa-briefcase text-info"></i> @emp.Name - Work Anniversary 🎊</div>
                    }
                }
                else
                {
                    <div class="text-muted">No celebrations tomorrow 🎉</div>
                }

            </div>
        </div>
    </div>

    <!-- Employee Distribution Chart -->
    <div class="col-md-6 mb-4 d-flex">
        <div class="card shadow-sm border-0 flex-fill h-100">
            <div class="card-header bg-white fw-bold">
                Employee Distribution by Department
            </div>
            <div class="card-body d-flex align-items-center justify-content-center">
                <canvas id="deptChart" height="250"></canvas>
            </div>
        </div>
    </div>
</div>

<!-- Chart.js Script -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const ctx = document.getElementById('deptChart');

    new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: ['IT', 'HR', 'Finance', 'Marketing', 'Operations', 'Sales'],
            datasets: [{
                label: 'Employees',
                data: [25, 18, 12, 20, 15, 10],
                backgroundColor: [
                    '#1976d2',  // IT
                    '#009688',  // HR
                    '#9c27b0',  // Finance
                    '#f44336',  // Marketing
                    '#ff9800',  // Operations
                    '#00bfa5'   // Sales
                ],
                borderWidth: 2,
                borderColor: '#fff',
                hoverOffset: 6
            }]
        },
        options: {
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: {
                        boxWidth: 20,
                        padding: 15
                    }
                }
            },
            cutout: '65%',
            responsive: true,
            maintainAspectRatio: false
        }
    });
</script>

<!-- Celebration Styling -->
<style>
    .card {
        border-radius: 10px;
    }

    .card-header {
        font-size: 1.1rem;
        border-bottom: 1px solid #e0e0e0;
    }

    .celebration-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        background: rgba(0, 0, 0, 0.05);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .text-danger {
        color: #e53935 !important;
    }

    .text-info {
        color: #00838f !important;
    }
</style>
